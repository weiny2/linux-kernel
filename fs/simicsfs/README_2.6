Compiling SimicsFS for a running kernel
=======================================

* Unpack the 'simics-x.xx.tar.gz' file.

* Make sure that the kernel source/devel package is installed.

* Change to the simicsfs directory, and compile the module:

  $ make -C /lib/modules/`uname -r`/build M=`pwd`

* Install the resulting 'simicsfs.ko' module file, and configure simicsfs as
  described in the Simics User Guide.

The following document describes how to build an external module for a running
kernel in more detail: linux-2.6.x/Documentation/kbuild/modules.txt



Adding SimicsFS to a kernel source tree
=======================================

* Unpack the 'simicsfs.tar.gz' file in the 'linux-2.6.x/fs/' directory.

* Rename Makefile_2.6 to Makefile

* Add the following lines to 'fs/Makefile' and 'fs/Kconfig':

linux-2.6.x/fs/Makefile:
-----------------
obj-$(CONFIG_SIMICSFS)		+= simicsfs/

linux-2.6.x/fs/Kconfig:
------------------
source "fs/simicsfs/Kconfig"

* Configure the Linux build, select simicsfs as module.

* Compile (and install) the kernel and its modules, or build the simicsfs
  module only using:

  $ cd linux-2.6.x
  $ make SUBDIRS=fs/simicsfs modules

* Install the resulting 'simicsfs.o' module file, and configure simicsfs as
  described in the Simics User Guide.
